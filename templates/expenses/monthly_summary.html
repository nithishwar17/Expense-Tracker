{% extends "expenses/base.html" %}
{% block content %}
<h3>Monthly Summary</h3>
<div class="chart-card">
  <canvas id="monthlyChart" style="width:100%;height:100%;"></canvas>
</div>

<table class="table mt-3">
  <thead><tr><th>Month</th><th>Total</th></tr></thead>
  <tbody>
    {% for m in monthly %}
    <tr><td>{{ m.month|date:"F Y" }}</td><td>â‚¹{{ m.total }}</td></tr>
    {% empty %}
    <tr><td colspan="2">No data</td></tr>
    {% endfor %}
  </tbody>
</table>

<script>
  const labelsM = {{ labels|safe }};
  const dataM = {{ data|safe }};
  const ctxM = document.getElementById('monthlyChart').getContext('2d');
  new Chart(ctxM, {
    type: 'bar',
    data: {
      labels: labelsM,
      datasets: [{ label: 'Amount', data: dataM }]
    },
    options: { responsive: true, maintainAspectRatio: false }
  });
</script>
{% endblock %}
